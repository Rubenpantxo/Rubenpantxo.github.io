<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototipo - Rubenpantxo.com</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilo general con la textura de cuaderno y la fuente principal */
        body {
            font-family: 'Inter', sans-serif;
            /* Textura de cuaderno sutil. Se puede cambiar por cualquier otra imagen. */
            background-color: #fdfdf8;
            background-image:
                linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px),
                linear-gradient(#eee .1em, transparent .1em);
            background-size: 100% 1.2em;
            overflow-x: hidden;
            transition: background-color 0.5s ease;
        }

        /* Estilo para el título principal, con una fuente que parece escrita a mano */
        .titulo-principal {
            font-family: 'Kalam', cursive;
            color: #003366; /* Un azul oscuro */
        }

        /* Contenedor de los botones de navegación */
        #main-nav {
            transition: transform 0.5s ease-in-out;
        }

        /* Estilo de cada botón de navegación con efecto glassmorfismo */
        .nav-item {
            font-family: 'Kalam', cursive;
            font-weight: 700;
            /* Glassmorfismo */
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow:
                0 8px 32px 0 rgba(31, 38, 135, 0.15),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.3),
                0 0 20px rgba(255, 255, 255, 0.1);
            position: relative;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            overflow: hidden;
            color: #2c3e50;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow:
                0 8px 32px 0 rgba(31, 38, 135, 0.25),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.4),
                0 0 30px rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        /* Efecto de tinta china sobre cristal */
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(44, 62, 80, 0.3) 20%,
                rgba(44, 62, 80, 0.6) 50%,
                rgba(44, 62, 80, 0.3) 80%,
                transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-item:hover::after {
            opacity: 1;
        }

        /* La "cuerda" que cuelga de cada botón - ahora más translúcida */
        .nav-item::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 40px;
            background: linear-gradient(to bottom,
                rgba(139, 69, 19, 0.4),
                rgba(210, 105, 30, 0.6));
            z-index: -1;
        }

        /* Animación typewriter para el texto */
        @keyframes typewriter {
            from {
                width: 0;
            }
            to {
                width: 100%;
            }
        }

        @keyframes inkBleed {
            0% {
                filter: blur(1px) opacity(0.7);
            }
            50% {
                filter: blur(0.5px) opacity(0.85);
            }
            100% {
                filter: blur(0px) opacity(1);
            }
        }

        .nav-item .typewriter-text {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            animation: typewriter 2s steps(30) 0.5s forwards, inkBleed 2s ease-in-out 0.5s forwards;
            width: 0;
            letter-spacing: 0.05em;
        }

        .nav-item.animated .typewriter-text {
            width: 100%;
        }

        /* --- LÓGICA DE ANIMACIÓN --- */
        /* Cuando se abre una sección, se añade la clase 'section-open' al body */
        body.section-open .nav-item {
            /* Por defecto, todos los botones suben */
            transform: translateY(-300px);
            opacity: 0;
            pointer-events: none; /* Evita que se pueda hacer clic cuando están ocultos */
        }

        /* El botón activo (el que se ha clicado) se queda en su sitio y actúa como título */
        body.section-open .nav-item.active {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            box-shadow:
                0 8px 32px 0 rgba(59, 130, 246, 0.3),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.4),
                0 0 40px rgba(59, 130, 246, 0.4);
            font-size: 1.5rem; /* Hacemos el texto más grande para que parezca un título */
            color: #1a73e8;
        }

        /* Estilo de los iconos de la esquina (interrogante y volver) */
        .corner-icon {
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease, opacity 0.3s ease, background-color 0.3s ease;
            position: absolute;
            top: 20px;
            right: 20px;
            border: 2px solid #333;
        }
        
        #contact-toggle {
            background-color: #ffde59; /* Amarillo */
            color: #333;
            font-weight: bold;
            box-shadow: 3px 3px 0 #333, inset 2px 2px 0px rgba(255,255,255,0.5);
        }
        
        #back-arrow {
            background-color: #dc3545; /* Rojo */
            color: white;
            box-shadow: 3px 3px 0 #333;
        }

        .icon-hidden {
            transform: scale(0);
            opacity: 0;
            pointer-events: none;
        }

        #social-links {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .social-hidden {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
        }
        
        .content-section {
            transition: opacity 0.5s ease 0.2s, transform 0.5s ease 0.2s;
        }

        .content-hidden {
            opacity: 0;
            transform: translateY(30px);
            display: none;
        }
        
        /* Estilos para la aplicación de placas solares inyectada */
        #app-placas-container {
            font-family: 'Inter', sans-serif;
        }
        #app-placas-container .result-card { background: linear-gradient(145deg, #1e3a8a, #3b82f6); }
        #app-placas-container .card { background-color: rgba(55, 65, 81, 0.5); border: 1px solid #4b5567; }
        #app-placas-container .tool-btn.active { background-color: #3b82f6; color: white; transform: scale(1.05); box-shadow: 0 0 15px rgba(59, 130, 246, 0.5); }
        #app-placas-container .asset { cursor: grab; transition: transform 0.2s ease; }
        #app-placas-container .asset:hover { transform: scale(1.05); }
        #app-placas-container .asset:active { cursor: grabbing; }
        #app-placas-container .texture-thumb { cursor: pointer; border: 2px solid transparent; transition: border-color 0.2s ease; background-size: cover; background-position: center;}
        #app-placas-container .texture-thumb:hover, #app-placas-container .texture-thumb.active { border-color: #3b82f6; }
        #app-placas-container #canvas-container { position: relative; }
        #app-placas-container #roofCanvas { background-size: 250px; background-repeat: repeat; image-rendering: auto; }

        /* Estilos neumorfistas para las categorías de enlaces */
        .category-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 1.5rem;
            overflow: hidden;
            background: #e8e8e3;
            box-shadow:
                12px 12px 24px rgba(163, 177, 198, 0.4),
                -12px -12px 24px rgba(255, 255, 255, 0.9);
            position: relative;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow:
                12px 12px 24px rgba(163, 177, 198, 0.4),
                -12px -12px 24px rgba(255, 255, 255, 0.9),
                0 0 40px rgba(59, 130, 246, 0.3),
                0 0 80px rgba(59, 130, 246, 0.15);
        }

        .category-card:active {
            transform: translateY(-2px);
            box-shadow:
                8px 8px 16px rgba(163, 177, 198, 0.4),
                -8px -8px 16px rgba(255, 255, 255, 0.9);
        }

        .category-card > div:first-child {
            transition: all 0.4s ease;
            background: linear-gradient(145deg, #f0f0eb, #e0e0db);
            box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.2),
                        inset -5px -5px 10px rgba(255, 255, 255, 0.7);
        }

        .category-card:hover > div:first-child {
            background: linear-gradient(145deg, #f5f5f0, #e5e5e0);
            box-shadow: inset 5px 5px 10px rgba(163, 177, 198, 0.15),
                        inset -5px -5px 10px rgba(255, 255, 255, 0.8),
                        0 0 20px rgba(59, 130, 246, 0.2);
        }

        /* Iconos con efecto neon */
        .category-card .category-icon {
            filter: drop-shadow(0 0 0px transparent);
            transition: filter 0.4s ease;
        }

        .category-card:hover .category-icon {
            filter: drop-shadow(0 0 8px currentColor) drop-shadow(0 0 15px currentColor);
        }

        /* Estilos neumorfistas para enlaces individuales */
        .link-card-neumorph {
            background: #e8e8e3;
            border-radius: 1.2rem;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                8px 8px 16px rgba(163, 177, 198, 0.4),
                -8px -8px 16px rgba(255, 255, 255, 0.9);
            border: none;
        }

        .link-card-neumorph:hover {
            transform: translateY(-4px);
            box-shadow:
                10px 10px 20px rgba(163, 177, 198, 0.4),
                -10px -10px 20px rgba(255, 255, 255, 0.9),
                0 0 30px rgba(59, 130, 246, 0.4),
                0 0 60px rgba(59, 130, 246, 0.2);
        }

        .link-card-neumorph:active {
            transform: translateY(-2px);
            box-shadow:
                5px 5px 10px rgba(163, 177, 198, 0.4),
                -5px -5px 10px rgba(255, 255, 255, 0.9);
        }

        .link-card-neumorph .link-icon {
            filter: drop-shadow(0 0 0px transparent);
            transition: filter 0.3s ease;
        }

        .link-card-neumorph:hover .link-icon {
            filter: drop-shadow(0 0 6px currentColor) drop-shadow(0 0 12px currentColor);
        }

        /* Botón volver con estilo neumorfista */
        .neumorph-button {
            background: #e8e8e3;
            border-radius: 1rem;
            transition: all 0.3s ease;
            box-shadow:
                8px 8px 16px rgba(163, 177, 198, 0.4),
                -8px -8px 16px rgba(255, 255, 255, 0.9);
            border: none;
        }

        .neumorph-button:hover {
            box-shadow:
                10px 10px 20px rgba(163, 177, 198, 0.4),
                -10px -10px 20px rgba(255, 255, 255, 0.9),
                0 0 20px rgba(59, 130, 246, 0.3);
        }

        .neumorph-button:active {
            box-shadow:
                inset 4px 4px 8px rgba(163, 177, 198, 0.4),
                inset -4px -4px 8px rgba(255, 255, 255, 0.9);
        }

        /* Sección de enlaces con fondo neumorfista */
        #enlaces-content {
            background: #f5f5f0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 sm:p-8 transition-all duration-500">

    <div class="max-w-7xl mx-auto">

        <header class="relative text-center py-6">
            <div class="flex justify-center items-center gap-4">
                <img id="site-logo" src="img/logo.PNG" alt="Logo Rubenpantxo" class="h-16">
                <h1 class="titulo-principal text-5xl md:text-7xl font-bold">Rubenpantxo.com</h1>
            </div>
            
            <div id="contact-toggle" class="corner-icon flex items-center justify-center">?</div>
            <div id="back-arrow" class="corner-icon flex items-center justify-center icon-hidden">↩</div>

            <div id="social-links" class="absolute top-20 right-8 mt-2 flex flex-col items-center gap-4 social-hidden">
                <a href="#" class="text-3xl text-pink-600 hover:scale-110 transition-transform"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-3xl text-red-600 hover:scale-110 transition-transform"><i class="fas fa-envelope"></i></a>
                <a href="#" class="text-3xl text-gray-800 hover:scale-110 transition-transform"><i class="fab fa-github"></i></a>
            </div>
        </header>

        <nav id="main-nav" class="flex flex-col sm:flex-row justify-center items-center gap-8 sm:gap-12 mt-8">
            <div class="nav-item text-xl p-4 rounded-lg" data-section="noticias">
                <span class="typewriter-text">Noticias y Artículos</span>
            </div>
            <div class="nav-item text-xl p-4 rounded-lg" data-section="apps">
                <span class="typewriter-text">Aplicaciones</span>
            </div>
            <div class="nav-item text-xl p-4 rounded-lg" data-section="games">
                <span class="typewriter-text">Juegos</span>
            </div>
            <div class="nav-item text-xl p-4 rounded-lg" data-section="enlaces">
                <span class="typewriter-text">Enlaces Web</span>
            </div>
        </nav>

        <main id="content-container" class="mt-16">
            
            <section id="noticias-content" class="content-section content-hidden">
                <div class="grid md:grid-cols-2 gap-8 items-start pt-8">
                    <div class="space-y-6">
                        <h3 class="text-2xl font-bold border-b-2 pb-2 border-gray-400">Últimas de Tecnología y Salud</h3>
                        
                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                            <img src="img/Noticias/Img_Noti_1.png" alt="Render del IBM Quantum System Two en Euskadi" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">Primer 'IBM Quantum System Two' de Europa en Euskadi</h4>
                                <p class="text-sm text-gray-700">El Gobierno Vasco e IBM instalarán en el IBM-Euskadi Quantum Computational Center el primer ordenador cuántico de este tipo fuera de EE.UU., impulsando la investigación y el desarrollo tecnológico en la región.</p>
                                <a href="https://www.basquequantum.eus/es/noticias/gobierno-vasco-e-ibm-anuncian-instalacion-del-primer-ibm-quantum-system-two-europa-ibm" target="_blank" class="text-xs text-blue-500 hover:underline mt-1 inline-block">Leer más...</a>
                            </div>
                        </div>
                        
                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                            <img src="img/Noticias/Img_Noti_2.png" alt="Hilo robótico guiado para el cerebro" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">Hilo Robótico para Vasos Sanguíneos del Cerebro</h4>
                                <p class="text-sm text-gray-700">Investigadores del MIT han desarrollado un hilo robótico, controlado magnéticamente, capaz de navegar por los vasos sanguíneos del cerebro para tratar aneurismas y derrames sin necesidad de cirugía invasiva.</p>
                                <a href="https://news.mit.edu/2019/robot-brain-blood-vessels-0828" target="_blank" class="text-xs text-blue-500 hover:underline mt-1 inline-block">Leer más...</a>
                            </div>
                        </div>

                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                            <img src="img/Noticias/Img_Noti_3.png" alt="Paciente recibe ultrasonido focalizado para el Parkinson" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">Avance en Parkinson: Ultrasonido Focalizado</h4>
                                <p class="text-sm text-gray-700">El Centro Médico Sheba en Israel utiliza ultrasonido focalizado (FUS) no invasivo para tratar síntomas motores del Parkinson, permitiendo una recuperación rápida sin cirugía cerebral abierta.</p>
                                <a href="https://www.shebaonline.org/parkinsons-treatment-focused-ultrasound/" target="_blank" class="text-xs text-blue-500 hover:underline mt-1 inline-block">Leer más...</a>
                            </div>
                        </div>

                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                            <img src="img/Noticias/Img_Noti_4.jpg" alt="Ilustración de disco óptico de 125 terabytes" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">Disco óptico de 125 TB</h4>
                                <p class="text-sm text-gray-700">Un equipo chino presenta un soporte óptico con densidad récord, relevante para archivo frío, pero aún en fase de investigación sin cifras de coste, velocidad o durabilidad.</p>
                            </div>
                        </div>
                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                             <img src="img/Noticias/Img_Noti_5.jpg" alt="Prototipo del perro robot Black Panther 2.0" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">Perro-robot “Black Panther 2.0”</h4>
                                <p class="text-sm text-gray-700">Asegura cubrir 100 m en menos de 10 s (>36 km/h), un salto frente a modelos comerciales. Se necesita verificación independiente de las condiciones de prueba y su autonomía.</p>
                            </div>
                        </div>
                        <div class="p-4 border rounded-lg bg-white shadow-md flex gap-4 items-start">
                            <img src="img/Technology.png" alt="Representación de la matriz láser Photon Matrix" loading="lazy" class="w-24 h-24 rounded-md object-cover">
                            <div>
                                <h4 class="font-bold text-lg">“Photon Matrix” anti-mosquitos</h4>
                                <p class="text-sm text-gray-700">Afirma usar IA y láseres para abatir hasta 40 mosquitos por segundo. Viable en entornos controlados, pero depende de la seguridad ocular, consumo y coste para su adopción.</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border-dashed border-4 rounded-lg bg-white/50 h-full min-h-[300px] flex items-center justify-center sticky top-24">
                        <p class="text-gray-500 text-lg">Aquí irá el dibujo decorativo</p>
                    </div>
                </div>
            </section>

            <section id="apps" class="content-section content-hidden section section--apps" aria-labelledby="apps-title">
                <header class="section__header">
                    <h2 id="apps-title" class="text-3xl font-bold">Aplicaciones</h2>
                </header>
                <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 my-4">
                </div>
            </section>

            <section id="games" class="content-section content-hidden section section--games" aria-labelledby="games-title">
                <header class="section__header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                    <h2 id="games-title" class="text-3xl font-bold">Juegos</h2>
                    <button class="cta bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg shadow-md transition-transform" type="button">Explorar</button>
                </header>
                <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 my-6">
                    <article class="bg-white rounded-lg shadow-md p-4 flex flex-col gap-2">
                        <h3 class="text-xl font-semibold">Círculo Perfecto</h3>
                        <p class="text-sm text-gray-700">Prueba tu habilidad dibujando un círculo perfecto con este juego interactivo.</p>
                        <a href="juegos/circle.html" class="text-blue-600 hover:text-blue-800 font-semibold">Jugar ahora</a>
                    </article>
                    <article class="bg-white rounded-lg shadow-md p-4 flex flex-col gap-2">
                        <h3 class="text-xl font-semibold">Mi Granja</h3>
                        <p class="text-sm text-gray-700">Diviértete con este juego de granja interactivo. Planta cultivos, mejora tu granja y conviértete en el mejor granjero.</p>
                        <a href="juegos/granja/index.html" class="text-blue-600 hover:text-blue-800 font-semibold">Jugar ahora</a>
                    </article>
                    <article class="bg-white rounded-lg shadow-md p-4 flex flex-col gap-2">
                        <h3 class="text-xl font-semibold">Tetris Agrícola</h3>
                        <p class="text-sm text-gray-700">Un Tetris temático de granja donde organizas herramientas agrícolas. ¡Completa líneas y alcanza la mejor cosecha!</p>
                        <a href="juegos/tetris/index.html" class="text-blue-600 hover:text-blue-800 font-semibold">Jugar ahora</a>
                    </article>
                </div>
            </section>

            
            <section id="enlaces-content" class="content-section content-hidden">
                <div class="pt-8">
                    <h3 class="text-2xl font-bold border-b-2 pb-2 border-gray-400 mb-6">Enlaces de Interés</h3>

                    <!-- Grid de categorías -->
                    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">

                        <!-- Mapas -->
                        <div class="category-card cursor-pointer" data-category="mapas">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-map-marked-alt text-6xl text-green-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Mapas</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">3 recursos</p>
                            </div>
                        </div>

                        <!-- IAs -->
                        <div class="category-card cursor-pointer" data-category="ias">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-brain text-6xl text-purple-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">IAs</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">4 recursos</p>
                            </div>
                        </div>

                        <!-- Esquemas -->
                        <div class="category-card cursor-pointer" data-category="esquemas">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-project-diagram text-6xl text-yellow-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Esquemas</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">1 recurso</p>
                            </div>
                        </div>

                        <!-- Developing -->
                        <div class="category-card cursor-pointer" data-category="developing">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-code text-6xl text-blue-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Developing</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">7 recursos</p>
                            </div>
                        </div>

                        <!-- Blogs -->
                        <div class="category-card cursor-pointer" data-category="blogs">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-blog text-6xl text-pink-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Blogs</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">1 recurso</p>
                            </div>
                        </div>

                        <!-- Multimedia -->
                        <div class="category-card cursor-pointer" data-category="multimedia">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-photo-video text-6xl text-orange-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Multimedia</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">2 recursos</p>
                            </div>
                        </div>

                        <!-- Seguridad -->
                        <div class="category-card cursor-pointer" data-category="seguridad">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-shield-alt text-6xl text-red-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Seguridad</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">1 recurso</p>
                            </div>
                        </div>

                        <!-- Curiosidades -->
                        <div class="category-card cursor-pointer" data-category="curiosidades">
                            <div class="rounded-t-lg p-6 flex flex-col items-center justify-center h-40">
                                <i class="fas fa-lightbulb text-6xl text-cyan-600 mb-2 category-icon"></i>
                                <h4 class="text-xl font-bold text-gray-800">Curiosidades</h4>
                            </div>
                            <div class="bg-gradient-to-b from-white/50 to-white/30 rounded-b-lg p-3">
                                <p class="text-sm text-gray-700 text-center font-semibold">5 recursos</p>
                            </div>
                        </div>

                    </div>

                    <!-- Contenedor de enlaces por categoría (ocultos inicialmente) -->
                    <div id="category-links-container" class="hidden">
                        <button id="back-to-categories" class="neumorph-button mb-6 px-6 py-3 text-gray-700 font-semibold flex items-center gap-2">
                            <i class="fas fa-arrow-left"></i> Volver a Categorías
                        </button>

                        <div id="category-title" class="text-2xl font-bold mb-6"></div>

                        <!-- Mapas -->
                        <div id="links-mapas" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://comparamapas.navarra.es/?lang=es" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-map-location-dot text-2xl text-green-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Comparador Mapas Navarra</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Visualiza y compara diferentes mapas y ortofotos de la región de Navarra.</p>
                                </a>
                                <a href="https://idena.navarra.es/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-database text-2xl text-blue-800 link-icon"></i><h4 class="font-bold text-lg text-gray-800">IDENA</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Infraestructura de Datos Espaciales de Navarra. Cartografía y datos geográficos.</p>
                                </a>
                                <a href="https://visgl.github.io/react-google-maps/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-map-marked-alt text-2xl text-red-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">React Google Maps</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Componentes de React para integrar Google Maps en tus aplicaciones.</p>
                                </a>
                            </div>
                        </div>

                        <!-- IAs -->
                        <div id="links-ias" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://aistudio.google.com/prompts/new_chat" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-robot text-2xl text-blue-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Google AI Studio</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Experimenta y crea con los modelos de inteligencia artificial de Google.</p>
                                </a>
                                <a href="https://openai.com/es-ES/gpt-5/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-brain text-2xl text-teal-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">ChatGPT 5</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Accede a los modelos de lenguaje avanzados de OpenAI para tareas de IA.</p>
                                </a>
                                <a href="https://www.anthropic.com/claude/sonnet" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-microchip text-2xl text-violet-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Claude Sonnet 4</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Modelo de IA de Anthropic para programación y razonamiento complejo.</p>
                                </a>
                                <a href="https://www.midjourney.com/home" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-paint-brush text-2xl text-indigo-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Midjourney</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Generador de imágenes a partir de texto mediante inteligencia artificial.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Esquemas -->
                        <div id="links-esquemas" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://app.diagrams.net/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-project-diagram text-2xl text-yellow-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Diagrams.net</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Herramienta gratuita para crear diagramas de flujo, mapas mentales y más.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Developing -->
                        <div id="links-developing" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://vercel.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-server text-2xl text-gray-800 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Vercel</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Plataforma de hosting para desplegar aplicaciones web modernas y rápidas.</p>
                                </a>
                                <a href="https://astro.build/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-rocket text-2xl text-orange-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Astro</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Framework web para construir sitios rápidos y centrados en el contenido.</p>
                                </a>
                                <a href="https://supabase.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-bolt text-2xl text-green-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Supabase</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Alternativa a Firebase con base de datos, autenticación y más.</p>
                                </a>
                                <a href="https://pnpm.io/es/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-box-open text-2xl text-yellow-400 link-icon"></i><h4 class="font-bold text-lg text-gray-800">pnpm</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Gestor de paquetes rápido y eficiente en el uso de disco para JavaScript.</p>
                                </a>
                                <a href="https://windsurf.com/editor" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-code text-2xl text-sky-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Windsurf Editor</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Editor de código colaborativo en tiempo real para desarrollo en equipo.</p>
                                </a>
                                <a href="https://www.cloudflare.com/es-es/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-shield-halved text-2xl text-orange-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Cloudflare</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Servicios de seguridad, rendimiento y CDN para sitios y aplicaciones web.</p>
                                </a>
                                <a href="https://www.radix-ui.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-cubes text-2xl text-gray-900 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Radix UI</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Componentes de interfaz de usuario de bajo nivel para aplicaciones React.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Blogs -->
                        <div id="links-blogs" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://www.theunwindai.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-newspaper text-2xl text-blue-400 link-icon"></i><h4 class="font-bold text-lg text-gray-800">The Unwind AI</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Newsletter y recursos para mantenerse al día con la inteligencia artificial.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Multimedia -->
                        <div id="links-multimedia" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://tinywow.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-toolbox text-2xl text-orange-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">TinyWow</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Herramientas online gratuitas para PDF, imágenes, vídeos y más.</p>
                                </a>
                                <a href="https://mega.nz/folder/Uc4U3KpL#uzR3-BaRzcS9DZNo3nAxaw/folder/5RJQQLwD" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-cloud text-2xl text-red-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Almacenamiento Nube</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Accede a una carpeta compartida con archivos y recursos.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Seguridad -->
                        <div id="links-seguridad" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://www.surveillancewatch.io/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-video text-2xl text-gray-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">SurveillanceWatch</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Monitoriza y recibe alertas sobre vulnerabilidades de seguridad.</p>
                                </a>
                            </div>
                        </div>

                        <!-- Curiosidades -->
                        <div id="links-curiosidades" class="category-links hidden">
                            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                <a href="https://alison.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-graduation-cap text-2xl text-purple-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Alison</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Plataforma de aprendizaje con miles de cursos online gratuitos.</p>
                                </a>
                                <a href="https://visualgo.net/en" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-shapes text-2xl text-lime-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">VisuAlgo</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Visualiza algoritmos y estructuras de datos de forma interactiva.</p>
                                </a>
                                <a href="https://stan-smith.github.io/FossFLOW/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-sitemap text-2xl text-cyan-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">FossFLOW</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Visualizador de flujos de trabajo de código abierto para análisis de datos.</p>
                                </a>
                                <a href="https://posthog.com/" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-chart-line text-2xl text-yellow-500 link-icon"></i><h4 class="font-bold text-lg text-gray-800">PostHog</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">Plataforma de análisis de productos y datos para desarrolladores.</p>
                                </a>
                                <a href="https://www.firecrawl.dev/pricing" target="_blank" class="link-card-neumorph block">
                                    <div class="flex items-center gap-3"><i class="fas fa-spider text-2xl text-red-600 link-icon"></i><h4 class="font-bold text-lg text-gray-800">Firecrawl</h4></div>
                                    <p class="text-sm text-gray-600 mt-2">API para rastrear y convertir sitios web en datos estructurados y fiables.</p>
                                </a>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            const contactToggle = document.getElementById('contact-toggle');
            const socialLinks = document.getElementById('social-links');
            const backArrow = document.getElementById('back-arrow');
            const body = document.body;

            // Efecto typewriter - iniciar animación escalonada
            setTimeout(() => {
                navItems.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add('animated');
                        const typewriterSpan = item.querySelector('.typewriter-text');
                        if (typewriterSpan) {
                            typewriterSpan.style.animation = `
                                typewriter 1.5s steps(${typewriterSpan.textContent.length}) ${index * 0.3}s forwards,
                                inkBleed 1.5s ease-in-out ${index * 0.3}s forwards
                            `;
                        }
                    }, index * 400);
                });
            }, 500);

            const placasAppContent = `
                <div class="w-full max-w-full mx-auto flex flex-col lg:flex-row gap-4 h-[calc(100vh-4rem)] p-4">
                    <div class="w-full lg:w-1/4 xl:w-1/5 flex flex-col gap-4">
                        <header class="text-center">
                            <h1 class="text-2xl font-bold text-blue-400">Diseño Solar Visual</h1>
                        </header>
                        <div class="card p-4 rounded-xl">
                             <h2 class="text-xl font-bold mb-3">Componentes</h2>
                             <div class="grid grid-cols-2 gap-4">
                                 <div id="asset-panel" draggable="true" class="asset bg-gray-800 p-2 rounded-lg flex flex-col items-center justify-center text-center aspect-w-3 aspect-h-4">
                                     <img src="https://i.imgur.com/gKDrS1B.png" alt="Panel Solar" class="max-h-24 object-contain pointer-events-none">
                                     <span class="text-xs mt-1">Panel</span>
                                 </div>
                                 <div id="asset-profile" draggable="true" class="asset bg-gray-800 p-2 rounded-lg flex flex-col items-center justify-center text-center">
                                     <img src="https://i.imgur.com/u5t2G6S.png" alt="Perfil de Montaje" class="h-24 object-contain pointer-events-none transform -rotate-45">
                                     <span class="text-xs mt-1">Perfil</span>
                                 </div>
                             </div>
                        </div>
                        <div class="card p-4 rounded-xl">
                            <h2 class="text-xl font-bold mb-3">Configuración</h2>
                            <div class="space-y-3">
                                <div>
                                    <h4 class="font-semibold text-sm mb-1 text-gray-300">Panel Solar</h4>
                                    <div class="grid grid-cols-2 gap-2">
                                         <label class="text-xs">Ancho (mm)<input id="panel-width" type="number" value="1134" class="config-input mt-1 w-full bg-gray-800 rounded p-1 text-sm text-white"></label>
                                         <label class="text-xs">Alto (mm)<input id="panel-height" type="number" value="1800" class="config-input mt-1 w-full bg-gray-800 rounded p-1 text-sm text-white"></label>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-sm mb-1 text-gray-300">Perfil</h4>
                                    <div class="grid grid-cols-1 gap-2">
                                       <label class="text-xs">Longitud (mm)<input id="profile-length" type="number" value="3500" class="config-input mt-1 w-full bg-gray-800 rounded p-1 text-sm text-white"></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="result-card text-white p-4 rounded-xl shadow-lg text-center flex-grow flex flex-col justify-center">
                            <h3 class="text-md font-medium opacity-80">Paneles / Piezas</h3>
                            <div class="flex justify-around items-center mt-2">
                                <div class="text-center">
                                    <p id="totalPanels" class="text-4xl font-bold">0</p>
                                    <span class="text-xs opacity-80">Paneles</span>
                                </div>
                                 <div class="text-center">
                                    <p id="totalClamps" class="text-4xl font-bold">0</p>
                                    <span class="text-xs opacity-80">Piezas</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="w-full lg:w-1/2 xl:w-3/5 h-full rounded-lg shadow-2xl border border-blue-500/30 p-2 flex flex-col gap-2">
                         <div id="canvas-toolbar" class="flex items-center justify-between p-2 bg-gray-800/50 rounded-lg">
                            <div class="flex gap-2">
                                <button data-mode="move" class="tool-btn active bg-gray-700 p-2 rounded-lg" title="Mover y Seleccionar"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 9l-3 3 3 3"/><path d="M9 5l3-3 3 3"/><path d="M15 19l-3 3-3-3"/><path d="M19 9l3 3-3 3"/><path d="M2 12h20"/><path d="M12 2v20"/></svg></button>
                                <button data-mode="delete" class="tool-btn bg-gray-700 p-2 rounded-lg" title="Borrar Elemento"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button>
                            </div>
                            <div class="text-sm text-gray-400">Rueda del ratón: Zoom. Clic derecho: Mover vista.</div>
                        </div>
                        <div id="canvas-container" class="w-full h-full bg-gray-800 rounded-lg">
                             <canvas id="roofCanvas" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    <div class="w-full lg:w-1/4 xl:w-1/5 flex flex-col gap-4">
                         <div class="card p-4 rounded-xl">
                             <h2 class="text-xl font-bold mb-3">Textura del Tejado</h2>
                             <div id="texture-selector" class="grid grid-cols-2 gap-2">
                                <div data-texture="https://i.imgur.com/u10v0hW.jpeg" class="texture-thumb active aspect-square rounded" style="background-image: url('https://i.imgur.com/u10v0hW.jpeg')" alt="Teja Tradicional"></div>
                                <div data-texture="https://i.imgur.com/g0t93iN.jpeg" class="texture-thumb aspect-square rounded" style="background-image: url('https://i.imgur.com/g0t93iN.jpeg')" alt="Teja Plana"></div>
                                <div data-texture="https://i.imgur.com/4z2yA2p.jpeg" class="texture-thumb aspect-square rounded" style="background-image: url('https://i.imgur.com/4z2yA2p.jpeg')" alt="Pizarra Oscura"></div>
                                <div data-texture="https://i.imgur.com/e4T5JkI.jpeg" class="texture-thumb aspect-square rounded" style="background-image: url('https://i.imgur.com/e4T5JkI.jpeg')" alt="Teja Mixta"></div>
                             </div>
                        </div>
                         <div id="controls-container" class="card p-4 rounded-xl flex-grow overflow-y-auto">
                            <h2 class="text-xl font-bold mb-3">Zonas del Tejado</h2>
                            <div id="zonesContainer" class="space-y-4"></div>
                            <button id="addZoneBtn" class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">+ Añadir Zona</button>
                        </div>
                    </div>
                </div>
            `;
            
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    if (body.classList.contains('section-open')) return;

                    const sectionId = item.dataset.section;
                    const targetSection = document.getElementById(sectionId + '-content') || document.getElementById(sectionId);

                    body.classList.add('section-open');
                    body.style.backgroundColor =  '#fdfdf8';
                    navItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    contactToggle.classList.add('icon-hidden');
                    backArrow.classList.remove('icon-hidden');
                    
                    contentSections.forEach(section => section.classList.add('content-hidden'));

                    if(targetSection) {
                        if (sectionId === 'apps') {
                            const container = document.getElementById('app-placas-container');
                            if (container) {
                                container.innerHTML = placasAppContent;
                                setTimeout(initializePlacasApp, 0);
                            }
                        }
                        targetSection.classList.remove('content-hidden');
                        targetSection.style.display = 'block';
                    }
                });
            });

            backArrow.addEventListener('click', () => {
                body.classList.remove('section-open');
                body.style.backgroundColor = '#fdfdf8';
                navItems.forEach(item => item.classList.remove('active'));
                backArrow.classList.add('icon-hidden');
                contactToggle.classList.remove('icon-hidden');
                contentSections.forEach(section => {
                    section.classList.add('content-hidden');
                     setTimeout(() => {
                        if (!body.classList.contains('section-open')) {
                           section.style.display = 'none';
                           const container = document.getElementById('app-placas-container');
                           if(container) container.innerHTML = '';
                        }
                    }, 500);
                });
                socialLinks.classList.add('social-hidden');
            });

            contactToggle.addEventListener('click', () => {
                if (!body.classList.contains('section-open')) {
                    socialLinks.classList.toggle('social-hidden');
                }
            });

            function initializePlacasApp() {
                const appContainer = document.getElementById('app-placas-container');
                if (!appContainer) return;

                const canvas = appContainer.querySelector('#roofCanvas');
                const ctx = canvas.getContext('2d');
                const zonesContainer = appContainer.querySelector('#zonesContainer');
                const addZoneBtn = appContainer.querySelector('#addZoneBtn');
                const totalPanelsEl = appContainer.querySelector('#totalPanels');
                const totalClampsEl = appContainer.querySelector('#totalClamps');
                const toolbar = appContainer.querySelector('#canvas-toolbar');
                const assetPanel = appContainer.querySelector('#asset-panel');
                const assetProfile = appContainer.querySelector('#asset-profile');
                const textureSelector = appContainer.querySelector('#texture-selector');
                const panelWidthInput = appContainer.querySelector('#panel-width');
                const panelHeightInput = appContainer.querySelector('#panel-height');
                const profileLengthInput = appContainer.querySelector('#profile-length');
                
                const PROFILE_VISUAL_WIDTH = 40;
                const CLAMP_MID_WIDTH = 40;
                const CLAMP_END_WIDTH = 25;
                const CLAMP_HEIGHT = 50;

                let state = {
                    zones: [], profiles: [], panels: [], clamps: [],
                    mode: 'move', selectedObject: null, isDragging: false, isPanning: false,
                    dragOffset: { x: 0, y: 0 }, panStart: { x: 0, y: 0 },
                    scale: 0.05, panOffset: { x: 50, y: 50 }
                };
                let zoneCounter = 0; let elementCounter = 0;

                function addZone(width = 5970, height = 3420) {
                    zoneCounter++;
                    const zone = { id: `zone-${zoneCounter}`, width, height };
                    state.zones.push(zone); renderZoneControls(); draw();
                }
                function removeZone(id) {
                    state.zones = state.zones.filter(z => z.id !== id); renderZoneControls(); draw();
                }
                function updateZone(id, field, value) {
                    const zone = state.zones.find(z => z.id === id);
                    if (zone) { zone[field] = parseInt(value) || 0; draw(); }
                }
                function renderZoneControls() {
                    zonesContainer.innerHTML = state.zones.map(zone => `
                        <div class="bg-gray-700/50 p-3 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-bold text-md text-blue-300">Zona ${zone.id.split('-')[1]}</h3>
                                <button class="remove-zone-btn text-red-400 hover:text-red-300" data-id="${zone.id}">✕</button>
                            </div>
                            <div class="grid grid-cols-2 gap-2">
                                <label class="text-xs">Ancho<input type="number" value="${zone.width}" data-field="width" data-id="${zone.id}" class="zone-input mt-1 w-full bg-gray-800 rounded p-1 text-sm text-white"></label>
                                <label class="text-xs">Alto<input type="number" value="${zone.height}" data-field="height" data-id="${zone.id}" class="zone-input mt-1 w-full bg-gray-800 rounded p-1 text-sm text-white"></label>
                            </div>
                        </div>`).join('');
                }

                function draw() {
                    const parent = canvas.parentElement;
                    if (canvas.width !== parent.clientWidth || canvas.height !== parent.clientHeight){
                         canvas.width = parent.clientWidth; 
                         canvas.height = parent.clientHeight;
                    }
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.save();
                    ctx.translate(state.panOffset.x, state.panOffset.y); ctx.scale(state.scale, state.scale);
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)'; ctx.lineWidth = 5 / state.scale; ctx.setLineDash([15 / state.scale, 15 / state.scale]);
                    state.zones.forEach(z => ctx.strokeRect(0, 0, z.width, z.height));
                    ctx.setLineDash([]);
                    ctx.fillStyle = '#9ca3af';
                    state.profiles.forEach(p => ctx.fillRect(p.x, p.y, p.width, p.height));
                    state.panels.forEach(p => {
                        ctx.fillStyle = 'rgba(30, 58, 138, 0.85)';
                        ctx.fillRect(p.x, p.y, p.width, p.height);
                        ctx.strokeStyle = '#3b82f6'; ctx.lineWidth = 15 / state.scale;
                        ctx.strokeRect(p.x, p.y, p.width, p.height);
                    });
                    state.clamps.forEach(c => {
                        ctx.fillStyle = c.clampType === 'mid' ? 'rgba(234, 179, 8, 0.9)' : 'rgba(168, 85, 247, 0.9)';
                        ctx.fillRect(c.x, c.y, c.width, c.height);
                    });
                    if (state.selectedObject) {
                        ctx.strokeStyle = '#f59e0b'; ctx.lineWidth = 20 / state.scale;
                        const s = state.selectedObject;
                        ctx.strokeRect(s.x, s.y, s.width, s.height);
                    }
                    ctx.restore();
                    updateTotals();
                }
                
                function updateClamps() {
                    state.clamps = [];
                    state.profiles.forEach(p => {
                        const panelsOnProfile = [];
                        const isHorizProfile = p.width > p.height;
                        state.panels.forEach(panel => {
                            const isVertPanel = panel.height > panel.width;
                            if (isHorizProfile && isVertPanel) {
                                 const y_overlap = panel.y < p.y + p.height && panel.y + panel.height > p.y;
                                 const x_midpoint_inside = (panel.x + panel.width/2) > p.x && (panel.x + panel.width/2) < p.x + p.width;
                                 if(y_overlap && x_midpoint_inside) panelsOnProfile.push(panel);
                            } else if (!isHorizProfile && !isVertPanel) {
                                 const x_overlap = panel.x < p.x + p.width && panel.x + panel.width > p.x;
                                 const y_midpoint_inside = (panel.y + panel.height/2) > p.y && (panel.y + panel.height/2) < p.y + p.height;
                                 if(x_overlap && y_midpoint_inside) panelsOnProfile.push(panel);
                            }
                        });
                        if (isHorizProfile) panelsOnProfile.sort((a, b) => a.x - b.x);
                        else panelsOnProfile.sort((a, b) => a.y - b.y);
                        if (panelsOnProfile.length > 0) {
                            const first = panelsOnProfile[0];
                            const last = panelsOnProfile[panelsOnProfile.length - 1];
                            if(isHorizProfile) {
                                state.clamps.push({x: first.x - CLAMP_END_WIDTH, y: p.y - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, width: CLAMP_END_WIDTH, height: CLAMP_HEIGHT, clampType: 'end'});
                                state.clamps.push({x: last.x + last.width, y: p.y - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, width: CLAMP_END_WIDTH, height: CLAMP_HEIGHT, clampType: 'end'});
                            } else {
                                state.clamps.push({y: first.y - CLAMP_END_WIDTH, x: p.x - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, height: CLAMP_END_WIDTH, width: CLAMP_HEIGHT, clampType: 'end'});
                                state.clamps.push({y: last.y + last.height, x: p.x - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, height: CLAMP_END_WIDTH, width: CLAMP_HEIGHT, clampType: 'end'});
                            }
                        }
                        for (let i = 0; i < panelsOnProfile.length - 1; i++) {
                            const p1 = panelsOnProfile[i];
                            const p2 = panelsOnProfile[i+1];
                            if (isHorizProfile) {
                                const gap = p2.x - (p1.x + p1.width);
                                if (gap > 0 && gap < 100) {
                                    state.clamps.push({x: p1.x + p1.width + gap/2 - CLAMP_MID_WIDTH/2, y: p.y - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, width: CLAMP_MID_WIDTH, height: CLAMP_HEIGHT, clampType: 'mid'});
                                }
                            } else {
                                const gap = p2.y - (p1.y + p1.height);
                                 if (gap > 0 && gap < 100) {
                                    state.clamps.push({y: p1.y + p1.height + gap/2 - CLAMP_MID_WIDTH/2, x: p.x - (CLAMP_HEIGHT - PROFILE_VISUAL_WIDTH)/2, height: CLAMP_MID_WIDTH, width: CLAMP_HEIGHT, clampType: 'mid'});
                                }
                            }
                        }
                    });
                    draw();
                }

                function getObjectAt(worldX, worldY) {
                    for (const p of [...state.panels].reverse()) {
                        if (worldX > p.x && worldX < p.x + p.width && worldY > p.y && worldY < p.y + p.height) return p;
                    }
                    for (const p of [...state.profiles].reverse()) {
                         if (worldX > p.x && worldX < p.x + p.width && worldY > p.y && worldY < p.y + p.height) return p;
                    }
                    return null;
                }
                
                function handleMouseDown(e) {
                    if (e.button === 2) { 
                        state.isPanning = true;
                        state.panStart = { x: e.clientX, y: e.clientY };
                        canvas.style.cursor = 'grabbing';
                        return;
                    }
                    const worldPos = worldMousePos(e.clientX, e.clientY);
                    const object = getObjectAt(worldPos.x, worldPos.y);
                    state.selectedObject = object;
                    if (state.mode === 'move' && object) {
                        state.isDragging = true;
                        state.dragOffset.x = worldPos.x - object.x;
                        state.dragOffset.y = worldPos.y - object.y;
                         canvas.style.cursor = 'grabbing';
                    } else if (state.mode === 'delete' && object) {
                        if (object.type === 'panel') state.panels = state.panels.filter(p => p.id !== object.id);
                        if (object.type === 'profile') state.profiles = state.profiles.filter(p => p.id !== object.id);
                        state.selectedObject = null;
                        updateClamps();
                    }
                    draw();
                }
                function handleMouseMove(e) {
                    if (state.isPanning) {
                        const dx = e.clientX - state.panStart.x;
                        const dy = e.clientY - state.panStart.y;
                        state.panOffset.x += dx;
                        state.panOffset.y += dy;
                        state.panStart = { x: e.clientX, y: e.clientY };
                        draw();
                        return;
                    }
                    if (state.isDragging && state.selectedObject) {
                        const worldPos = worldMousePos(e.clientX, e.clientY);
                        state.selectedObject.x = worldPos.x - state.dragOffset.x;
                        state.selectedObject.y = worldPos.y - state.dragOffset.y;
                        draw();
                    }
                }
                function handleMouseUp(e) { 
                    if(state.isDragging) updateClamps();
                    state.isDragging = false; 
                    state.isPanning = false;
                    canvas.style.cursor = 'default';
                }
                function handleWheel(e) {
                    e.preventDefault();
                    const zoomIntensity = 0.1;
                    const wheel = e.deltaY < 0 ? 1 : -1;
                    const zoom = Math.exp(wheel * zoomIntensity);
                    const mousePos = worldMousePos(e.clientX, e.clientY);
                    state.panOffset.x -= mousePos.x * (zoom - 1);
                    state.panOffset.y -= mousePos.y * (zoom - 1);
                    state.scale *= zoom;
                    draw();
                }

                function setupDragAndDrop() {
                    assetPanel.addEventListener('dragstart', e => e.dataTransfer.setData('text/plain', 'panel'));
                    assetProfile.addEventListener('dragstart', e => e.dataTransfer.setData('text/plain', 'profileH'));
                    canvas.addEventListener('dragover', e => e.preventDefault());
                    canvas.addEventListener('drop', e => {
                        e.preventDefault();
                        const type = e.dataTransfer.getData('text/plain');
                        const worldPos = worldMousePos(e.clientX, e.clientY);
                        elementCounter++;
                        const id = `el-${elementCounter}`;
                        const panelW = parseInt(panelWidthInput.value);
                        const panelH = parseInt(panelHeightInput.value);
                        const profileL = parseInt(profileLengthInput.value);
                        if (type === 'panel') {
                            state.panels.push({ id, type: 'panel', x: worldPos.x - panelW/2, y: worldPos.y - panelH/2, width: panelW, height: panelH });
                        } else if (type === 'profileH') {
                            state.profiles.push({ id, type: 'profile', x: worldPos.x - profileL/2, y: worldPos.y - PROFILE_VISUAL_WIDTH/2, width: profileL, height: PROFILE_VISUAL_WIDTH });
                        }
                        updateClamps();
                    });
                }
                
                function updateTotals() { 
                    totalPanelsEl.textContent = state.panels.length;
                    totalClampsEl.textContent = state.clamps.length;
                }
                function worldMousePos(screenX, screenY) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (screenX - rect.left - state.panOffset.x) / state.scale;
                    const y = (screenY - rect.top - state.panOffset.y) / state.scale;
                    return { x, y };
                }
                function setupEventListeners() {
                    addZoneBtn.addEventListener('click', () => addZone());
                    zonesContainer.addEventListener('input', e => {
                        if (e.target.classList.contains('zone-input')) updateZone(e.target.dataset.id, e.target.dataset.field, e.target.value);
                    });
                    zonesContainer.addEventListener('click', e => {
                        if (e.target.classList.contains('remove-zone-btn')) removeZone(e.target.dataset.id);
                    });
                    toolbar.addEventListener('click', e => {
                        const button = e.target.closest('.tool-btn');
                        if (button) {
                            state.mode = button.dataset.mode;
                            appContainer.querySelectorAll('.tool-btn').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                        }
                    });
                    textureSelector.addEventListener('click', e => {
                        const thumb = e.target.closest('.texture-thumb');
                        if (thumb) {
                            const textureUrl = thumb.dataset.texture;
                            canvas.style.backgroundImage = `url(${textureUrl})`;
                            appContainer.querySelectorAll('.texture-thumb').forEach(t => t.classList.remove('active'));
                            thumb.classList.add('active');
                        }
                    });

                    canvas.addEventListener('mousedown', handleMouseDown);
                    canvas.addEventListener('mousemove', handleMouseMove);
                    canvas.addEventListener('mouseup', handleMouseUp);
                    canvas.addEventListener('mouseleave', () => { 
                        if (state.isDragging) {
                            updateClamps();
                        }
                        state.isDragging = false; 
                        state.isPanning = false; 
                        canvas.style.cursor = 'default';
                    });
                    canvas.addEventListener('wheel', handleWheel, { passive: false });
                    canvas.addEventListener('contextmenu', e => e.preventDefault());
                    
                    // FIX: This prevents the ResizeObserver loop error.
                    let resizeObserver = new ResizeObserver(() => {
                        window.requestAnimationFrame(() => {
                            if (canvas.parentElement && canvas.parentElement.offsetParent !== null) {
                                draw();
                            }
                        });
                    });
                    if (canvas.parentElement) {
                        resizeObserver.observe(canvas.parentElement);
                    }
                }
                
                addZone();
                setupEventListeners();
                setupDragAndDrop();
                appContainer.querySelector('.texture-thumb').click();
            }

            const ctas = document.querySelectorAll('.cta');
            ctas.forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.classList.add('cta-rise');
                    setTimeout(() => btn.classList.remove('cta-rise'), 300);
                });
            });

            const internalLinks = document.querySelectorAll('a[href^="#"]');
            internalLinks.forEach(anchor => {
                anchor.addEventListener('click', event => {
                    const href = anchor.getAttribute('href');
                    if (!href || href === '#') {
                        return;
                    }
                    const target = document.querySelector(href);
                    if (target) {
                        event.preventDefault();
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Manejo de categorías de enlaces
            const categoryCards = document.querySelectorAll('.category-card');
            const categoryLinksContainer = document.getElementById('category-links-container');
            const backToCategoriesBtn = document.getElementById('back-to-categories');
            const categoryTitle = document.getElementById('category-title');

            // Nombres de categorías en español
            const categoryNames = {
                'mapas': 'Mapas',
                'ias': 'Inteligencia Artificial',
                'esquemas': 'Esquemas',
                'developing': 'Desarrollo Web',
                'blogs': 'Blogs',
                'multimedia': 'Multimedia',
                'seguridad': 'Seguridad',
                'curiosidades': 'Curiosidades'
            };

            categoryCards.forEach(card => {
                card.addEventListener('click', () => {
                    const category = card.dataset.category;

                    // Ocultar grid de categorías
                    card.parentElement.style.display = 'none';

                    // Mostrar contenedor de enlaces
                    categoryLinksContainer.classList.remove('hidden');

                    // Actualizar título
                    categoryTitle.textContent = categoryNames[category];

                    // Ocultar todos los enlaces
                    document.querySelectorAll('.category-links').forEach(links => {
                        links.classList.add('hidden');
                    });

                    // Mostrar enlaces de la categoría seleccionada
                    const selectedLinks = document.getElementById(`links-${category}`);
                    if (selectedLinks) {
                        selectedLinks.classList.remove('hidden');
                    }
                });
            });

            backToCategoriesBtn.addEventListener('click', () => {
                // Ocultar contenedor de enlaces
                categoryLinksContainer.classList.add('hidden');

                // Mostrar grid de categorías
                document.querySelector('.grid.sm\\:grid-cols-2.lg\\:grid-cols-4').style.display = 'grid';

                // Ocultar todos los enlaces
                document.querySelectorAll('.category-links').forEach(links => {
                    links.classList.add('hidden');
                });
            });
        });
    </script>
</body>
</html>
