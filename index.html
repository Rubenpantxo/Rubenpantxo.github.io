<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubenpantxo.com</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background-color: #f8f8f8;
            background-image:
                linear-gradient(rgba(100,149,237,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(100,149,237,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            min-height: 100vh;
            padding: 40px 20px;
        }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 60px 40px; box-shadow: 0 0 20px rgba(0,0,0,0.1); border-radius: 10px; position: relative; }
        .container::before { content: ''; position: absolute; left: 60px; top: 0; bottom: 0; width: 2px; background: #ff6b6b; }
        .title { color: #1e3a8a; font-size: 2.5em; text-align: center; margin-bottom: 50px; font-weight: bold; text-shadow: 1px 1px 2px rgba(30,58,138,0.3); transform: rotate(-1deg); }
        .navigation { display: grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:20px; margin-bottom:40px; }
        .nav-button { background: linear-gradient(135deg,#3b82f6,#1d4ed8); color:white; border:none; padding:20px; border-radius:15px; font-size:1.1em; font-family:'Courier New', monospace; cursor:pointer; transition: all .3s ease; box-shadow:0 4px 15px rgba(59,130,246,0.3); }
        .nav-button:hover { transform: translateY(-5px); background: linear-gradient(135deg,#2563eb,#1e40af); box-shadow:0 8px 25px rgba(59,130,246,0.4); }
        .content-section { display: none; margin-top:40px; padding:30px; background:#f8fafc; border-radius:10px; border-left:4px solid #3b82f6; color:#1e3a8a; line-height:1.6; }
        .content-section.active { display:block; animation:fadeIn .5s ease-in; }
        @keyframes fadeIn { from { opacity:0; transform: translateY(20px);} to { opacity:1; transform: translateY(0);} }
        .section-title { color:#1e3a8a; font-size:1.8em; margin-bottom:20px; border-bottom:2px solid #3b82f6; padding-bottom:10px; }
        /* GAME STYLES */
        #gameContainer { display:none; position:relative; width:100%; padding-top:56.25%; /* 16:9 ratio */ background:#8B4513; margin-top:20px; }
        #gameCanvas { position:absolute; top:0; left:0; width:100%; height:100%; }
        #gameUI { position:absolute; top:10px; left:10px; color:white; font-size:1em; }
        #backBtn { position:absolute; top:10px; right:10px; background:#ff4444; color:#fff; border:none; padding:8px 12px; border-radius:5px; cursor:pointer; }
        #pauseBtn { position:absolute; top:10px; left:50%; transform: translateX(-50%); background:#444; color:#fff; border:none; padding:8px 12px; border-radius:5px; cursor:pointer; }
        /* MENU PAL√â */
        .menu-palet { position:relative; display:inline-block; width:100%; max-width:600px; margin:0 auto; }
        .menu-palet img { width:100%; display:block; }
        .menu-palet button, .menu-palet .label { position:absolute; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.5); color:#fff; border:none; padding:8px 16px; border-radius:5px; font-size:1.2em; cursor:pointer; }
        .menu-palet #btnStart { top:45%; }
        .menu-palet #btnScores { top:60%; }
        .menu-palet .level-label { top:30%; display:flex; gap:10px; transform:translateX(-50%) translateY(-50%); }
        .menu-palet .level-label input { margin-left:5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">Rubenpantxo.com</h1>
        <div class="navigation">
            <button class="nav-button" onclick="showSection('contacto')">Contacto</button>
            <button class="nav-button" onclick="showSection('articulos')">Art√≠culos</button>
            <button class="nav-button" onclick="showSection('support')">Support</button>
            <button class="nav-button" onclick="showSection('play')">Play</button>
        </div>
        <!-- Contacto, Art√≠culos y Support iguales -->
        <div id="contacto" class="content-section">...contenido contacto...</div>
        <div id="articulos" class="content-section">...contenido art√≠culos...</div>
        <div id="support" class="content-section">...contenido support...</div>
        <!-- PLAY -->
        <div id="play" class="content-section">
            <h2 class="section-title">Juegos</h2>
            <!-- MISMO ESTILO DE LA P√ÅGINA para bot√≥n Jugar Ahora -->
            <div class="article-card">
                <h3 class="handwriting">üåæ Harvest Artichokes</h3>
                <p class="handwriting">Un divertido juego de recolecci√≥n de alcachofas...</p>
                <button onclick="initMenu()" class="nav-button" style="width:200px;">‚ñ∂Ô∏è Jugar Ahora</button>
            </div>
            <!-- MEN√ö PAL√â del juego -->
            <div id="menuGame" class="menu-palet" style="display:none;">
                <img src="img/1_Palet.png" alt="Men√∫ Juego">
                <div class="level-label">
                    <span>Nivel:</span>
                    <label>1<input type="radio" name="nivel" value="1" checked></label>
                    <label>2<input type="radio" name="nivel" value="2"></label>
                    <label>3<input type="radio" name="nivel" value="3"></label>
                </div>
                <button id="btnStart">JUGAR</button>
                <button id="btnScores">PUNTUACIONES</button>
            </div>
            <!-- CONTENEDOR DEL JUEGO -->
            <div id="gameContainer">
                <canvas id="gameCanvas"></canvas>
                <div id="gameUI">
                    <div id="timer">Tiempo: 00:00</div>
                    <div id="count">Alcachofas: 0/5</div>
                    <div id="total">Total: 0</div>
                </div>
                <button id="backBtn">‚Üê Volver</button>
                <button id="pauseBtn">PAUSA</button>
            </div>
        </div>
    </div>
    <script>
        // Mostrar secciones
        function showSection(id) {
            document.querySelectorAll('.content-section').forEach(s=>s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        document.addEventListener('DOMContentLoaded',()=>showSection('contacto'));

        // Variables juego
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let level=1, carried=0, total=0, maxCarry=5;
        const imgPalet = new Image(); imgPalet.src='img/1_Palet.png';
        const imgBg=[];
        for(let i=1;i<=3;i++){ imgBg[i]=new Image(); imgBg[i].src=`img/Textura_tierra_${i}.png`; }
        const playerImg={normal:new Image(), tired:new Image(), fallen:new Image()};
        playerImg.normal.src='img/2_Agricul.png';
        playerImg.tired.src='img/1_cansado.png';
        playerImg.fallen.src='img/1_caida.png';
        const artImg=new Image(); artImg.src='img/Alcachofa.png';
        const obs1=new Image(); obs1.src='img/Piedra_1_obs.png';
        const obs2=new Image(); obs2.src='img/Piedra_2_obs.png';
        let player={x:0,y:0,w:48,h:48,speed:2,isTired:false,isFrozen:false};
        let artichokes=[], obstacles=[];
        let keys={}; let startTime;

        // Control de men√∫
        function initMenu(){
            document.getElementById('menuGame').style.display='block';
        }
        document.getElementById('btnStart').onclick=()=>{
            level = +document.querySelector('input[name="nivel"]:checked').value;
            document.getElementById('menuGame').style.display='none';
            startGame();
        };
        document.getElementById('backBtn').onclick=()=>{ endGame(); };
        document.getElementById('pauseBtn').onclick=()=>{ paused=!paused; renderPause(); };

        // Redimensionar canvas
        function resize(){ width=canvas.width=canvas.parentElement.clientWidth; height=canvas.height=canvas.parentElement.clientHeight; }
        window.addEventListener('resize',resize);

        // Iniciar juego
        let running=false, paused=false;
        function startGame(){
            resize(); carried=0; total=0; player.isTired=false; player.isFrozen=false; player.speed=2;
            // posicionar
            player.x=width/2; player.y=height-100;
            // generar alcachofas y piedras
            artichokes=[]; obstacles=[];
            for(let i=0;i<50;i++) artichokes.push({x:Math.random()*(width-32),y:Math.random()*(height-200)+100,taken:false});
            for(let i=0;i<5;i++) obstacles.push({x:Math.random()*(width-48),y:Math.random()*(height-200)+100,type:Math.random()<.5?1:2,taken:false});
            keys={}; startTime=performance.now(); running=true; paused=false;
            requestAnimationFrame(loop);
        }

        // Bucle principal
        function loop(){ if(!running||paused)return; update(); render(); requestAnimationFrame(loop); }
        function update(){
            if(!player.isFrozen){ if(keys.ArrowLeft)player.x-=player.speed; if(keys.ArrowRight)player.x+=player.speed;
                if(keys.ArrowUp)player.y-=player.speed; if(keys.ArrowDown)player.y+=player.speed; }
            player.x=Math.max(0,Math.min(player.x,width-player.w)); player.y=Math.max(0,Math.min(player.y,height-player.h));
            // recoger alcachofas
            artichokes.forEach(a=>{
                if(!a.taken && collide(player,a)){
                    a.taken=true; carried++; total++;
                    if(total===5){ player.isTired=true; player.speed=1; }
                }
            });
            // mensaje lleno
            document.getElementById('count').textContent=`Alcachofas: ${carried}/${maxCarry}`;
            // descargar en tractor (arriba centro)
            if(carried && player.y<100 && Math.abs(player.x-width/2)<100){ carried=0; }
            // colisi√≥n piedras
            if(!player.isFrozen) for(let o of obstacles){
                if(!o.taken && collide(player,{x:o.x,y:o.y,w:48,h:48})){
                    o.taken=true; player.isFrozen=true; player.speed=0;
                    setTimeout(()=>{ player.isFrozen=false; player.speed=player.isTired?1:2; },3000);
                    break; }
            }
            // fin juego
            if(total>=50&&carried===0){ running=false; document.getElementById('finalTime').textContent=`Tiempo: ${((performance.now()-startTime)/1000).toFixed(1)}s`; document.getElementById('gameOver').style.display='block'; }
        }
        function render(){
            // fondo nivel
            let bg=imgBg[level]; if(bg.complete){ let p=ctx.createPattern(bg,'repeat'); ctx.fillStyle=p; ctx.fillRect(0,0,width,height); }
            // dibujar alcachofas y piedras
            artichokes.forEach(a=>{ if(!a.taken) ctx.drawImage(artImg,a.x,a.y,32,32); });
            obstacles.forEach(o=>{ if(!o.taken) ctx.drawImage(o.type===1?obs1:obs2,o.x,o.y,48,48); });
            // jugador
            let img=player.isFrozen?playerImg.fallen:(player.isTired?playerImg.tired:playerImg.normal);
            ctx.drawImage(img,player.x,player.y,48,48);
            // UI tiempo y total
            let t=Math.floor((performance.now()-startTime)/1000),m=Math.floor(t/60).toString().padStart(2,'0'),s=(t%60).toString().padStart(2,'0');
            document.getElementById('timer').textContent=`Tiempo: ${m}:${s}`;
            document.getElementById('total').textContent=`Total: ${total}`;
        }
        function collide(a,b){ return a.x<b.x+b.w&&a.x+a.w>b.x&&a.y<b.y+b.h&&a.y+a.h>b.y; }

        // Capturar teclas
        window.addEventListener('keydown',e=>keys[e.key]=true);
        window.addEventListener('keyup',e=>keys[e.key]=false);
    </script>
</body>
</html>
